<% provide(:title, Translation.get_string('make_report', current_user)) %>
<h1><i class="material-icons large">create</i> <%= Translation.get_string('make_report', current_user) %></h1>
<div class="row">
  <%= form_for(@report, html: {class: "col s12"}) do |f| %>
    <%= render 'shared/error_messages', object: f.object %>

    <div class="row">
      <div class="col s12 m6 l4 offset-m6 offset-l8 input-field">
        <%= render partial: "shared/geo_state_input", locals: {object: "report", input_class: 'filter_trigger'} %>
      </div>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">create</i>
        <%= f.text_area :content, class: "materialize-textarea" %>
        <%= f.label :content, Translation.get_string('type_report', current_user) %>
      </div>
    </div>

    <div class="row">
      <div class="file-field input-field col s12">
        <input class="file-path validate" type="text"/>
        <div class="btn-flat">
          <i class="material-icons left">insert_photo</i>
          <span><%= Translation.get_string('put_photo', current_user) %></span>
          <input type="file" />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col s12 m6">
        <%= radio_button_tag("report-type", "impact") %>
        <%= label_tag("report-type_impact", Translation.get_string('this_impact', current_user)) %>
        <%= radio_button_tag("report-type", "planning") %>
        <%= label_tag("report-type_planning", Translation.get_string('this_planning', current_user)) %>
      </div>
      <div class="col s12 m6">
        <% Report.categories.each do |key, category| %>
          <div>
            <%= f.check_box(key) %>
            <%= f.label(key, "#{Translation.get_string('report_about', current_user)} #{category.translation_for(current_user)}.") %>
          </div>
        <% end %>
      </div>
    </div>

    <div class="row">
      <div class="input-field col s12 m6">
        <%= render partial: "shared/multiselect", locals: {
              text: Translation.get_string('relates_languages', current_user),
              icon: "language",
              object: "report",
              attribute: "languages",
              display: :name,
              element_class: "filterable_item",
              data: :geo_state_ids_str,
              collection: @minority_languages,
              selected: Hash.new
        } %>
      </div>
      <div class="input-field col s12 m6">
        <%= render partial: "shared/multiselect", locals: {
              text: Translation.get_string('relates_oa', current_user),
              icon: "local_offer",
              object: "report",
              attribute: "topics",
              display: :name,
              collection: @topics,
              selected: Hash.new
        } %>
      </div>
    </div>

    <div class="row">
      <div class="row s12">
        <%= button_tag( :class => "btn waves-effect waves-light right") do %>
          <%= Translation.get_string('submit', current_user) %> <i class="material-icons right">send</i>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
