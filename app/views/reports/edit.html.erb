<% provide(:title, 'Edit Report') %>
<h1>Edit Report</h1>
<div class="row">
  <%= form_for(@report, html: {class: "col s12"}) do |f| %>
    <%= render 'shared/error_messages', object: f.object %>
    <div class="row">
      <div class="input-field col s6">
        <%= f.select(:report_type) do %>
            <%= options_for_select(report_type_text.invert, @report.report_type) %>
        <% end %>
        <%= f.label :report_type, "Report Type" %>
      </div>
      <div class="input-field col s6">
        <% if current_user.can_archive_report? %>
          <% Report.states.each do |key, value| %>
            <p>
              <%= f.radio_button(:state, key, checked: @report.state == key) %>
              <%= f.label "#{:state}_#{key}", key.capitalize %>
            </p>
          <% end %>
        <% end %>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <%= f.text_area :content, class: "materialize-textarea" %>
        <%= f.label :content, "Type your report here." %>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s6">
        <a class='dropdown-button btn-flat' href='#' data-activates='languages_dropdown' data-hover="true">Relates to languages...</a>
        <ul id='languages_dropdown' class='dropdown-content'>
          <% @minority_languages.each do |lang| %>
            <li>
              <%= check_box_tag('report[languages][' + lang.id.to_s + ']', 1, @report.languages.include?(lang)) %>
              <%= label_tag('report[languages][' + lang.id.to_s + ']', lang.name) %>
            </li>
          <% end %>
        </ul>
      </div>
      <div class="input-field col s6">
        <a class='dropdown-button btn-flat' href='#' data-activates='topics_dropdown' data-hover="true">Relates to topics...</a>
        <ul id='topics_dropdown' class='dropdown-content'>
          <% @topics.each do |topic| %>
            <li>
              <%= check_box_tag('report[topics][' + topic.id.to_s + ']', 1, @report.topics.include?(topic)) %>
              <%= label_tag('report[topics][' + topic.id.to_s + ']', topic.name) %>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
    <%= button_tag( :class => "btn waves-effect waves-light right") do %>
      Submit Changes <i class="material-icons right">send</i>
    <% end %>
  <% end %>
</div>
