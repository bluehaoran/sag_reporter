<% provide(:title, 'Reports grouped by Language') %>
<h1>Reports Grouped by Language</h1>
<ul class="collapsible" data-collapsible="accordion">
  <% @reports.group_by_collection(@languages, &:languages).each do |language, lang_reports| %>
    <li>
      <div class="collapsible-header <%= colour_class(language.colour) %>"><%= language.name %></div>
      <div class="collapsible-body <%= colour_class(language.colour) %>">
        <% lang_reports.each_with_index do |report, index| %>
          <%= '<div class="row">'.html_safe if index % 3 == 0 %>
            <div class="col s12 m6 l4">
              <%= render partial: "report", object: report, locals: {languages: false, topics: true} %>
            </div>
          <%= '</div>'.html_safe if (index + 1) % 3 == 0 %>
        <% end %>
      </div>
    </li>
  <% end %>
</ul>