<% provide(:title, 'Report on an event') %>
<h1><i class="material-icons large">event</i> Report on an Event</h1>
<div class="row">
  <%= form_for(@event, html: {class: "col s12"}) do |f| %>
    <div class="row">
      <div class="input-field col s8">
        <i class="material-icons prefix">label</i>
        <%= f.text_field :event_label %>
        <%= f.label :event_label, "Event Label" %>
      </div>
      <div class="input-field col s4">
        <i class="material-icons prefix">today</i>
        <%= f.date_field :event_date, class: "datepicker active" %>
        <%= f.label :event_date, "Date" %>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s6 m4">
        <i class="material-icons prefix">location_on</i>
        <%= f.text_area :location, class: "materialize-textarea" %>
        <%= f.label :location, "Location (village, block, district)" %>
      </div>
      <div class="input-field people-increase col s6 m4">
        <i class="material-icons prefix">people</i>
        <%= autocomplete_field_tag "people", '', autocomplete_person_name_events_path %>
        <%= label_tag :people, "Contributing people", {class: "tooltipped", "data-position" => "top", "data-delay" => "50", "data-tooltip" => "Write one name in each row"} %>
      </div>
      <div class="input-field col s6 m4">
        <%= f.number_field :participant_amount %>
        <%= f.label :participant_amount, "Total amount of participants" %>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s6">
        <%= render partial: "shared/multiselect", locals: {
        	text: "Languages involved...",
        	icon: "language",
        	object: "event",
        	attribute: "languages",
        	collection: @minority_languages,
        	selected: Hash.new
        } %>
      </div>
      <div class="input-field col s6">
        <!--i class="material-icons prefix">directions_walk</i-->
        <%= select("event", "purpose", Event.purpose_text.invert, {include_blank: "something else"}) %>
        <%= f.label :purpose, "Purpose: To enable..." %>
      </div>
    </div>
    <% yes_no_questions.each do |code, question| %>
      <div class="row">
        <div class="col s12">
          <div class="yes-no-question">
            <i class="material-icons">question_answer</i>
            <%= question %>
            <div class="input-field right">
          	  <%= radio_button_tag(code, "no") %>
          	  <%= label_tag("#{code}_no", "No") %>
          	  <%= radio_button_tag(code, "yes") %>
          	  <%= label_tag("#{code}_yes", "Yes") %>
            </div>
            <div class="yes-response hide">
              <div class="row response-input">
              	<div class="input-field col s6">
              	  <%= text_area_tag("#{code}-response", "", class: "materialize-textarea") %>
              	  <%= label_tag("#{code}-response", "What was said?") %>
              	</div>
              	<div class="col s6">
          	      <%= radio_button_tag("#{code}-res", "impact") %>
          	      <%= label_tag("#{code}-res_impact", "This has already happened") %>
          	      <%= radio_button_tag("#{code}-res", "hope") %>
          	      <%= label_tag("#{code}-res_hope", "Will hope this will happen in the future") %>
          	      <%= radio_button_tag("#{code}-res", "challenge") %>
          	      <%= label_tag("#{code}-res_challenge", "This is a challenge") %>
              	</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">event_available</i>
        <%= f.text_area :content, class: "materialize-textarea" %>
        <%= f.label :content, "If anything else happened in the event that should be recorded, write it here." %>
      </div>
  <% end %>
</div>
