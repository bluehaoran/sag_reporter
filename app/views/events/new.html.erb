<% provide(:title, 'Report on an event') %>
<h1><i class="material-icons large">event</i> Report on an Event</h1>
<div class="row">
  <%= form_for(@event, html: {class: "col s12"}) do |f| %>
    <div class="row">
      <div class="col s8">

        <div class="row">
          <div class="input-field col s12">
            <i class="material-icons prefix">label</i>
            <%= f.text_field :event_label %>
            <%= f.label :event_label, "Event Name" %>
          </div>
        </div>

        <div class="row">
          <div class="col s8">
            <i class="material-icons prefix">location_on</i>
            <%= label_tag "Location" %>
            <div class="input-field">
              <%= f.text_field :district %>
              <%= f.label :district %>
            </div>
            <div class="input-field">
              <%= f.text_field :sub_district %>
              <%= f.label :sub_district, "Sub-district" %>
            </div>
            <div class="input-field">
              <%= f.text_field :village %>
              <%= f.label :village %>
            </div>
          </div>
          <div class="col s4">
            <div class="input-field">
              <i class="material-icons prefix">today</i>
              <%= f.date_field :event_date, class: "datepicker active" %>
              <%= f.label :event_date, "Date" %>
            </div>
            <div class="input-field">
              <%= f.number_field :participant_amount %>
              <%= f.label :participant_amount, "Total number of participants" %>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="input-field col s12">
            <%= render partial: "shared/multiselect", locals: {
            	text: "Languages involved...",
            	icon: "language",
            	object: "event",
            	attribute: "languages",
              display: :name,
            	collection: @minority_languages,
            	selected: Hash.new
            } %>
          </div>
        </div>

        <div class="row">
          <div class="input-field col s12">
            <!--i class="material-icons prefix">directions_walk</i-->
            <%= render partial: "shared/multiselect", locals: {
              text: "Purpose: To enable...",
              icon: "directions_walk",
              object: "event",
              attribute: "purposes",
              display: :description,
              collection: @all_purposes,
              selected: Hash.new
            } %>
          </div>
        </div>

      </div>
      <div class="input-field people-increase col s4">
        <i class="material-icons prefix">people</i>
        <%= autocomplete_field_tag "people", '', autocomplete_person_name_events_path %>
        <%= label_tag :people, "Key people involved", {class: "tooltipped", "data-position" => "top", "data-delay" => "50", "data-tooltip" => "Write one name in each row"} %>
      </div>
    </div>
    <% yes_no_questions.each do |code, question| %>
      <div class="yes-no-question">

        <div class="row">
          <div class="col s10">
            <i class="material-icons">question_answer</i>
            <span class="event-question"><%= question %></span>
          </div>
          <div class="col s2 input-field">
          	<%= radio_button_tag(code, "no") %>
          	<%= label_tag("#{code}_no", "No") %>
          	<%= radio_button_tag(code, "yes") %>
          	<%= label_tag("#{code}_yes", "Yes") %>
          </div>
        </div>

        <div class="row yes-response hide">
          <div class="col s12">

            <div class="row response-input">
              <div class="input-field col s6">
                <%= text_area_tag("#{code}-response", "", class: "materialize-textarea") %>
                <%= label_tag("#{code}-response", "What was said, and who said it?") %>
              </div>
              <% unless code == "plan" or code == "impact" %>
              <div class="col s6">
                <div>
            	    <%= radio_button_tag("#{code}-res", "impact") %>
            	    <%= label_tag("#{code}-res_impact_0", "This is an impact") %>
                </div>
                <div>
            	    <%= radio_button_tag("#{code}-res", "hope") %>
          	      <%= label_tag("#{code}-res_plan_0", "This needs follow-up") %>
                </div>
              </div>
              <% end %>
            </div>

          </div>
        </div>

      </div>
    <% end %>
    <div class="yes-no-question">

      <div class="row">
        <div class="col s10">
          <i class="material-icons">question_answer</i>
          <span class="event-question">Are there any <strong>decisions or actions</strong> to be carried out?</span>
        </div>
        <div class="col s2 input-field">
          <%= radio_button_tag("decision", "no") %>
          <%= label_tag("decision_no", "No") %>
          <%= radio_button_tag("decision", "yes") %>
          <%= label_tag("decision_yes", "Yes") %>
        </div>
      </div>

      <div class="row yes-response hide">
          <div class="col s12">

            <div class="row decision-response-input">
              <div class="input-field col s6">
                <%= text_area_tag("decision-response", "", class: "materialize-textarea") %>
                <%= label_tag("decision-response", "What action must be taken?") %>
              </div>
              <div class="input-field col s6">
                <%= autocomplete_field_tag "person-responsible", '', autocomplete_person_name_events_path %>
                <%= label_tag("person-responsible", "The person responsible") %>
              </div>
            </div>

          </div>
        </div>

    </div>
    <div class="row">
      <div class="input-field col s12">
        <i class="material-icons prefix">event_available</i>
        <%= f.text_area :content, class: "materialize-textarea" %>
        <%= f.label :content, "If anything else happened in the event that should be recorded, write it here." %>
      </div>
  <% end %>
</div>
