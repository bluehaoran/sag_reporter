<h4><%= state_language.name(true) %></h4>
<% years = (1..3).map{ |y| FinishLineProgress.get_current_year + y } %>
<% month_start = Date::ABBR_MONTHNAMES[(Rails.configuration.year_cutoff_month)] %>
<% month_end = Date::ABBR_MONTHNAMES[(Rails.configuration.year_cutoff_month - 1)] %>
<% project.ministries.each do |ministry| %>
  <table class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
    <thead>
      <tr>
        <th class="mdl-data-table__cell--non-numeric" rowspan="2"><%= ministry.name %></th>
        <th class="mdl-data-table__cell--non-numeric" rowspan="2">Reported by</th>
        <th class="mdl-data-table__cell--non-numeric" rowspan="2">Calculated by</th>
        <% years.each do |year| %>
          <th class="mdl-data-table__cell--non-numeric" colspan="5"><%= "#{month_start} #{year - 1} to #{month_end} #{year}" %></th>
        <% end %>
      </tr>
      <tr>
        <% years.each do %>
          <th>Target</th>
          <% (1..4).each do |quarter| %>
            <th>Q<%= quarter %></th>
          <% end %>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% ministry.deliverables.order(:number).each do |deliverable| %>
        <tr>
          <td class="mdl-data-table__cell--non-numeric"><%= deliverable.short_form %></td>
          <td class="mdl-data-table__cell--non-numeric"><%= deliverable.reporter.humanize %></td>
          <td class="mdl-data-table__cell--non-numeric"><%= deliverable.calculation_method.humanize %></td>
          <% years.each do %>
            <td>total</td>
            <% (1..4).each do |quarter| %>
              <td>Q<%= quarter %></td>
            <% end %>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>